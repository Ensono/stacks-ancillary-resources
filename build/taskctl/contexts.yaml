contexts:

  powershell:
    executable:
      bin: docker
      args:
        - run
        - --env-file
        - envfile
        - --rm
        - -v
        - ${PWD}:/app
        - -v
        - /var/run/docker.sock:/var/run/docker.sock
        - -e
        - PSModulePath=/modules
        - -w
        - /app
        - amidostacks/runner-pwsh
        - pwsh
        - -NoProfile
        - -Command
    quote: "'"
    before: envfile -e home,path

  infratests:
    executable:
      bin: docker
      args:
        - run
        - --env-file
        - envfile
        - --rm
        - -v
        - ${PWD}:/app
        - -v
        - /var/run/docker.sock:/var/run/docker.sock
        - -e
        - PSModulePath=/modules
        - -w
        - /app
        - amidostacks/runner-pwsh-inspec
        - pwsh
        - -NoProfile
        - -Command
    quote: "'"
    before: envfile -e home,path

  powershell-python:
    executable:
      bin: docker
      args:
        - run
        - --rm
        - -v
        - ${PWD}:/app
        - -v
        - /var/run/docker.sock:/var/run/docker.sock
        - -e
        - PSModulePath=/modules
        - -w
        - /app
        - --env-file
        - envfile
        - amidostacks/runner-pwsh-python
        - pwsh
        - -NoProfile
        - -Command
    quote: "'"
    before: envfile -e path,home

  docsenv:
    executable:
      bin: docker
      args:
        - run
        - --rm
        - -v ${PWD}:/app
        - -w /app
        - -e PSModulePath=/modules
        - amidostacks/runner-pwsh-asciidoctor
        - pwsh -NoProfile -Command
